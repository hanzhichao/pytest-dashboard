<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用例列表</title>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/css/font-awesome-all.css" rel="stylesheet">
    <link href="../static/css/bootstrap-table.min.css" rel="stylesheet">
    <script src="../static/js/jquery.min.js"></script>
    <script src="../static/js/bootstrap.bundle.min.js"></script>
    <script src="../static/js/bootstrap-table.min.js"></script>
    <script src="../static/js/bootstrap-table-zh-CN.min.js"></script>
</head>
<body>
<nav class="container mt-3 navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="/">自动化测试</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="/">测试用例</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/testplan_list">测试计划</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/testplan_report">测试报告</a>
            </li>

        </ul>
    </div>
</nav>
<div id="main" class="container mt-3">
    <h3>用例列表</h3>
    <div class="buttons-toolbar"></div>
    <table id="table" class="table" data-toggle="table" data-url="testcase_list.json" data-search="true"
           data-pagination="true" data-buttons-toolbar=".buttons-toolbar" data-checkbox-header="true"
           data-buttons-class="primary"
           data-show-refresh="true" data-show-columns="true" data-show-columns-toggle-all="true"
           data-show-pagination-switch="true" data-show-toggle="true" data-show-fullscreen="true"
           data-detail-view="true" data-detail-formatter="detailFormatter"
           data-detail-view-icon="false" data-detail-view-by-click="true" data-loading-template="loadingTemplate">
        <thead>
        <tr>
            <th data-searchable="false" data-checkbox="true"></th>
            <th data-field="name">用例标题</th>
            <th data-field="doc">用例描述</th>
            <th data-field="level" data-sortable=true data-formatter="levelFormatter">优先级</th>
            <th data-field="tags">用例标签</th>
            <th data-field="nodeid" data-sortable=true>用例ID</th>
            <th data-field="owner" data-sortable=true>负责人</th>
            <th data-searchable="false" data-formatter="operateFormatter">操作</th>
        </tr>
        </thead>
    </table>
    {#    <table class="table mt-3 table-hover table-sm">#}
    {#        <thead>#}
    {#        <tr>#}
    {#            <th></th>#}
    {#            <th>用例标题</th>#}
    {#            <th>用例描述</th>#}
    {#            <th>优先级</th>#}
    {#            <th>用例标签</th>#}
    {#            <th>用例ID</th>#}
    {#            <th>负责人</th>#}
    {#            <th>操作</th>#}
    {#        </tr>#}
    {#        </thead>#}
    {#        <tbody>#}
    {#        {% for testcase in testcases %}#}
    {#            <tr>#}
    {#                <td><label>#}
    {#                    <input type="checkbox" name="nodeids" value="{{ testcase.nodeid }}">#}
    {#                </label></td>#}
    {#                <td>{{ testcase.name }}</td>#}
    {#                <td>{{ testcase.doc }}</td>#}
    {#                <td><a href="#" class="badge badge-danger">{{ testcase.level }}</a></td>#}
    {#                <td>#}
    {#                    {% if testcase.tags %}#}
    {#                        {% for tag in testcase.tags %}<a href="#" class="badge badge-secondary">{{ tag }}</a>#}
    {#                        {% endfor %}#}
    {#                    {% endif %}#}
    {#                </td>#}
    {#                <td>{{ testcase.nodeid }}</td>#}
    {#                <td>{{ testcase.owner }}</td>#}
    {#                <td>#}
    {#                    <button type="button" class="btn btn-link" data-toggle="modal"#}
    {#                            data-target="#code-{{ testcase.id }}"> 查看#}
    {#                    </button>#}
    {#                    <!-- Modal -->#}
    {#                    <div class="modal fade" id="code-{{ testcase.id }}" tabindex="-1" aria-hidden="true">#}
    {#                        <div class="modal-dialog">#}
    {#                            <div class="modal-content">#}
    {#                                <div class="modal-header">#}
    {#                                    <h5 class="modal-title">{{ testcase.title }}</h5>#}
    {#                                    <button type="button" class="close" data-dismiss="modal" aria-label="关闭">#}
    {#                                        <span aria-hidden="true">&times;</span>#}
    {#                                    </button>#}
    {#                                </div>#}
    {#                                <div class="modal-body">#}
    {#                                    <pre>{{ testcase.code }}</pre>#}
    {#                                </div>#}
    {#                            </div>#}
    {#                        </div>#}
    {#                    </div>#}
    {##}
    {#                    <button id="debug" class="btn btn-link" data-toggle="modal"#}
    {#                            data-target="#debug-{{ loop.index }}">调试#}
    {#                    </button>#}
    {#                </td>#}
    {##}
    {#                <!-- Modal -->#}
    {#                <div class="modal fade" id="debug-{{ loop.index }}" tabindex="-1" aria-hidden="true">#}
    {#                    <div class="modal-dialog">#}
    {#                        <div class="modal-content">#}
    {#                            <div class="modal-header">#}
    {#                                <h5 class="modal-title">{{ testcase.title }}</h5>#}
    {#                                <button type="button" class="close" data-dismiss="modal" aria-label="关闭">#}
    {#                                    <span aria-hidden="true">&times;</span>#}
    {#                                </button>#}
    {#                            </div>#}
    {#                            <div id="result-{{ loop.index }}" class="modal-body"></div>#}
    {#                        </div>#}
    {#                    </div>#}
    {#                </div>#}
    {#            </tr>#}
    {#        {% endfor %}#}
    {#        </tbody>#}
    {##}
    {#    </table>#}
    {#    <form action="/testplan_add" method="post">#}
    {##}
    {#        <label>#}
    {#            <input name="testplan_name" placeholder="测试计划名称"/>#}
    {#        </label>#}
    {#        <input class="btn btn-primary btn-sm" type="submit" value="新建测试计划">#}
    {#    </form>#}

</div>
<script>
    function levelFormatter(value, row) {
        return '<a href="#" class="badge badge-danger">' + value + '</a>'
    }

    function operateFormatter(value, row, index) {
        return [
            '<a class="remove" href="javascript:void(0)" title="调试">',
            '<i class="fa fa-play-circle"></i>',
            '</a>'
        ].join('')
    }

    function detailFormatter(index, row) {
        var html = []
        $.each(row, function (key, value) {
            if(key == 'code'){
                 html.push('<pre>'  + value + '</pre>')
            }
        })
        return html.join('')
    }
    function loadingTemplate(message) {
        return '<i class="fa fa-spinner fa-spin fa-fw"></i>'
    }
</script>

</body>

</html>